name: Issue Trigger Workflow

on:
  issues:
    types: [opened, reopened]

jobs:
  issue_details:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Fetch issue details
      id: fetch_issue
      run: |
        echo "ISSUE_NUMBER=${{ github.event.issue.number }}" >> $GITHUB_ENV
        echo "ISSUE_TITLE=${{ github.event.issue.title }}" >> $GITHUB_ENV
        echo "ISSUE_BODY=${{ github.event.issue.body }}" >> $GITHUB_ENV
        echo "ISSUE_ASSIGNEES=$(echo '${{ toJson(github.event.issue.assignees) }}' | jq -r '.[].login' | paste -sd ',' -)" >> $GITHUB_ENV
        echo "ISSUE_LABELS=$(echo '${{ toJson(github.event.issue.labels) }}' | jq -r '.[].name' | paste -sd ',' -)" >> $GITHUB_ENV

    - name: Print issue details
      env:
        ISSUE_NUMBER: ${{ env.ISSUE_NUMBER }}
        ISSUE_TITLE: ${{ env.ISSUE_TITLE }}
        ISSUE_BODY: ${{ env.ISSUE_BODY }}
        ISSUE_ASSIGNEES: ${{ env.ISSUE_ASSIGNEES }}
        ISSUE_LABELS: ${{ env.ISSUE_LABELS }}
      run: |
        echo "Issue Number: ${ISSUE_NUMBER}"
        echo "Issue Title: ${ISSUE_TITLE}"
        echo "Issue Body: ${ISSUE_BODY}"
        echo "Issue Assignees: ${ISSUE_ASSIGNEES}"
        echo "Issue Labels: ${ISSUE_LABELS}"
